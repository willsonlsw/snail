C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE SECTION
OBJECT MODULE PLACED IN section.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE section.c LARGE OPTIMIZE(9,SPEED) BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include<reg52.h>
   2          #include<intrins.h>
   3          #include"LCD_driver.h"
   4          #include"touch.h"
   5          #include"section.h"
   6          #include"sensor.h"
   7          
   8          idata unsigned int rotset=0,rottmp=0;//rotact=0;
   9          xdata unsigned char buttonID;//计算每个周期脉冲数
  10          idata unsigned int T;
  11          idata unsigned int TT=0,count_time=0,count=0,Acc_time=0;
  12          idata char chart_time=0;
  13          idata u16 corx,cory; 
  14          idata u8 temp_w[51],temp[51];
  15          xdata u8 record_w[51],record_data[51];
  16          idata u8 Left,Right,ReChk_time=0,Chk=2,Chk_label=0;
  17          char srec;
  18          idata bit erec,resetrot;
  19          idata bit Acc_enable=0,Dis_enable=0,ConstantPower=0;
  20          idata u16 Acc_data[10];
  21          u8 tex[5];
  22          
  23          void time0_server_(void)interrupt 1      //中段服务程序
  24          {
  25   1              TH0=248;//0xfe;  //重置计数器
  26   1              TL0=48;//0x17;
  27   1              T++;
  28   1              TT++;
  29   1              count_time++;
  30   1              if(T>W)  //0-W内输出高电平
  31   1              {
  32   2                       PWM=0;
  33   2              }
  34   1              else
  35   1              {
  36   2                       PWM=1;
  37   2              }
  38   1              if(T==100)       
  39   1              {
  40   2                      T=0;
  41   2              }
  42   1              if(TT==500) TT=0;
  43   1              if(count_time==900)
  44   1              {
  45   2                      count=TH1*256+TL1;
  46   2                      TH1=0;
  47   2                      TL1=0;
  48   2              }
  49   1              else if(count_time==1000) count_time=0;
  50   1      }       
  51          
  52          void Fill4(u16 color)
  53          {
  54   1              LCD_Write_DATA(color>>8,color);
  55   1              LCD_Write_DATA(color>>8,color);
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 2   

  56   1              LCD_Write_DATA(color>>8,color);
  57   1              LCD_Write_DATA(color>>8,color);
  58   1      }
  59          //创建按钮
  60          void Button(u8 x1,u16 y1,u8 x2,u16 y2,u8 k,char num,u16 col1,u16 col2)
  61          {
  62   1              idata u16 i,j,l;
  63   1              Address_set(x1,y1,x2,y2);
  64   1              for(j=y1;j<=y2;j++)
  65   1                      for(i=x1;i<=x2;i++)
  66   1                               LCD_Write_DATA(0xff,0xff);                     
  67   1              for(i=x1;i<=x2;i++)
  68   1              {
  69   2                      Address_set(i,y1,i,y1+3);
  70   2                      Fill4(col1);
  71   2              }
  72   1              for(i=x1;i<=x2;i++)
  73   1              {
  74   2                      Address_set(i,y2-3,i,y2);
  75   2                      Fill4(col2);
  76   2              }
  77   1              for(i=y1;i<=y2;i++)
  78   1              {
  79   2                      Address_set(x1,i,x1+3,i);
  80   2                      Fill4(col1);
  81   2              }
  82   1              for(i=y1;i<=y2;i++)
  83   1              {
  84   2                      Address_set(x2-3,i,x2,i);
  85   2                      Fill4(col2);
  86   2              }
  87   1              for(j=0;j<=3;j++)
  88   1              {
  89   2                      for(i=0;i<=j;i++)
  90   2                      {
  91   3                              Address_set(x1+3-i,y2-3+j,x1+3-i,y2-3+j);
  92   3                              LCD_Write_DATA(col2>>8,col2);
  93   3                      }
  94   2              }
  95   1              Address_set(x2-3,y1,x2-1,y1);
  96   1              LCD_Write_DATA(col1>>8,col1);
  97   1              LCD_Write_DATA(col1>>8,col1);
  98   1              LCD_Write_DATA(col1>>8,col1);
  99   1              Address_set(x2-3,y1+1,x2-2,y1+1);
 100   1              LCD_Write_DATA(col1>>8,col1);
 101   1              LCD_Write_DATA(col1>>8,col1);
 102   1              Address_set(x2-3,y1+2,x2-3,y1+2);
 103   1              LCD_Write_DATA(col1>>8,col1);
 104   1              if(num==-1)
 105   1              {
 106   2                      l=((x2-x1)-k*24)/2;
 107   2                      j=((y2-y1)-24)/2;
 108   2                      for(i=0;i<k;i++)
 109   2                      {
 110   3                              ChineseChar(l+x1,y1+j,1,colors[4],colors[7],tex[i]+1);  
 111   3                              l+=24;
 112   3                      }
 113   2              }
 114   1              else
 115   1              {
 116   2                      l=((x2-x1)-16)/2;
 117   2                      j=((y2-y1)-24)/2;
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 3   

 118   2                      LCD_ShowChar(l+x1,j+y1,colors[4],colors[7],num+0x30,16);
 119   2              } 
 120   1              return;
 121   1      }
 122          
 123          void LCD_ShowChinese(u8 x,u16 y,u8 size,u16 col1,u16 col2,u8 k)
 124          {
 125   1              u16 i,j=0,ll;
 126   1              if(size==16) ll=0;
 127   1              else if(size==24) ll=1;
 128   1              for(i=0;i<k;i++)
 129   1              {
 130   2                      ChineseChar(j+x,y,ll,col1,col2,tex[i]);
 131   2                      j+=size;
 132   2              }
 133   1      }
 134          
 135          //按钮按下效果
 136          void ButtonDown(u8 x1,u16 y1,u8 x2,u16 y2,u16 col1,u16 col2)
 137          {       
 138   1              idata u16 i;
 139   1              for(i=x1;i<=x2;i++)
 140   1              {
 141   2                      Address_set(i,y1,i,y1+3);
 142   2                      Fill4(col2);
 143   2              }
 144   1              for(i=x1;i<=x2;i++)
 145   1              {
 146   2                      Address_set(i,y2-3,i,y2);
 147   2                      Fill4(col1);
 148   2              }
 149   1              for(i=y1;i<=y2;i++)
 150   1              {
 151   2                      Address_set(x1,i,x1+3,i);
 152   2                      Fill4(col2);
 153   2              }
 154   1              for(i=y1;i<=y2;i++)
 155   1              {
 156   2                      Address_set(x2-3,i,x2,i);
 157   2                      Fill4(col1);
 158   2              }
 159   1      }
 160          
 161          //按钮弹起效果
 162          void ButtonUp(u8 x1,u16 y1,u8 x2,u16 y2,u16 col1,u16 col2)
 163          {
 164   1              idata u16 i,j;
 165   1              for(i=x1;i<=x2;i++)
 166   1              {
 167   2                      Address_set(i,y1,i,y1+3);
 168   2                      Fill4(col1);
 169   2              }
 170   1              for(i=x1;i<=x2;i++)
 171   1              {
 172   2                      Address_set(i,y2-3,i,y2);
 173   2                      Fill4(col2);
 174   2              }
 175   1              for(i=y1;i<=y2;i++)
 176   1              {
 177   2                      Address_set(x1,i,x1+3,i);
 178   2                      Fill4(col1);
 179   2              }
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 4   

 180   1              for(i=y1;i<=y2;i++)
 181   1              {
 182   2                      Address_set(x2-3,i,x2,i);
 183   2                      Fill4(col2);
 184   2              }
 185   1              for(j=0;j<=3;j++)
 186   1              {
 187   2                      for(i=0;i<=j;i++)
 188   2                      {
 189   3                              Address_set(x1+3-i,y2-3+j,x1+3-i,y2-3+j);
 190   3                              LCD_Write_DATA(col2>>8,col2);
 191   3                      }
 192   2              }
 193   1              Address_set(x2-3,y1,x2-1,y1);
 194   1              LCD_Write_DATA(col1>>8,col1);
 195   1              LCD_Write_DATA(col1>>8,col1);
 196   1              LCD_Write_DATA(col1>>8,col1);
 197   1              Address_set(x2-3,y1+1,x2-2,y1+1);
 198   1              LCD_Write_DATA(col1>>8,col1);
 199   1              LCD_Write_DATA(col1>>8,col1);
 200   1              Address_set(x2-3,y1+2,x2-3,y1+2);
 201   1              LCD_Write_DATA(col1>>8,col1);
 202   1      }        
 203          
 204          //快速画线
 205          void LineF(int x0,int y0,int x1,int y1,u16 color)
 206          {
 207   1              idata u16 x,y,yo;
 208   1              float m;
 209   1              m=(float)(y1-y0)/(x1-x0);
 210   1              yo=y0;
 211   1              for(x=x0;x<=x1;x++)
 212   1              {
 213   2                      y=(float)m*(x-x0)+y0;
 214   2                      if(y>yo) FillRec(x,yo+1,x,y,color);
 215   2                      else if(y<yo) FillRec(x,y,x,yo-1,color);
 216   2                      else FillRec(x,y,x,y,color);
 217   2                      yo=y;
 218   2              }
 219   1      }
 220          
 221          
 222          void FillRec(u8 x1,u16 y1,u8 x2,u16 y2,u16 col)
 223          {
 224   1              u16 i,j;
 225   1              Address_set(x1,y1,x2,y2);
 226   1              for(i=y1;i<=y2;i++)
 227   1                      for(j=x1;j<=x2;j++)
 228   1                              LCD_Write_DATA(col>>8,col);
 229   1      }
 230          
 231          void ShowRotSpeed()
 232          {
 233   1              srec++;
 234   1              ReChk_time++;
 235   1              if(srec>=50) 
 236   1              {
 237   2                      if(erec==0)
 238   2                      {
 239   3                              CopyToTemp();
 240   3                              if(count>170) temp[49]=170;
 241   3                              else temp[49]=count;
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 5   

 242   3                              temp_w[49]=W;
 243   3                              erec=1;
 244   3                      }
 245   2                      srec=0;
 246   2              }
 247   1              if(count>170) record_data[srec]=170; 
 248   1              else record_data[srec]=count;
 249   1              record_w[srec]=W;
 250   1              LCD_ShowString(200,24,colors[4],colors[6],"/Sec",8);
 251   1          LCD_ShowNumber(156,24,colors[4],colors[6],count,8);
 252   1              LCD_ShowString(200,7,colors[4],colors[6],"%PWM",8);
 253   1              LCD_ShowNumber(156,7,colors[4],colors[6],W,8);
 254   1      }
 255          
 256          int GetPWM(int rs)
 257          {
 258   1              double p=8.095*0.000001*rs*rs*rs*rs*rs*rs*rs*rs+7.905;
 259   1              return p;
 260   1      }
 261          
 262          void RotChk()
 263          {
 264   1              u8 d;
 265   1              if(Left+1>=Right)
 266   1              {
 267   2                      //if(Chk_label>=2) Chk=1;
 268   2                      //else Chk_label++;
 269   2                      //if(count+1<rotset) Right+=32;
 270   2                      //else if(count-1>rotset) Left-=32;
 271   2      /*
 272   2                      if(count+5<rotset) Right+=32;
 273   2                      else if(count+1<rotset) Right+=2;
 274   2                      else if(count-5>rotset) Left-=32;
 275   2                      else if(count-1>rotset) Left-=2;
 276   2      */
 277   2                      if(count+1<rotset) Right+=(rotset-count);
 278   2                      else if(count-1>rotset) Left-=(count-rotset);
 279   2                      if(Right>101) Right=101;
 280   2                      if(Left<0) Left=0;              
 281   2              }
 282   1              if(rotset==0) W=0;
 283   1              else if(count<rotset)
 284   1              {
 285   2      /*              if(resetrot==1) 
 286   2                      {
 287   2                              Right=GetPWM(rotset)+5;
 288   2                              resetrot=0;
 289   2                      }
 290   2                      if(Right>101) Right=101;
 291   2      */
 292   2                      Left=W;
 293   2                      W=(Left+Right)>>1;
 294   2              }
 295   1              else if(rotset<count)
 296   1              {
 297   2                      Right=W-1;
 298   2                      W=(Left+Right)>>1;
 299   2              }
 300   1              if(Left>Right)
 301   1              {
 302   2                      d=Left;
 303   2                      Left=Right;
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 6   

 304   2                      Right=d;
 305   2              }
 306   1              if(W>100) W=100;
 307   1              if(W<0) W=0;
 308   1      }
 309          
 310          void StartUI()
 311          {                
 312   1              int aa,bb,d0;
 313   1              idata u16 dis;
 314   1      
 315   1          LCD_Init();
 316   1              Pant(0xf8,0x1f);
 317   1              LCD_CS=0;
 318   1              
 319   1              tex[0]=3;tex[1]=11;
 320   1              Button(50,50,190,100,2,-1,0x07ff,0x00ff);
 321   1              tex[0]=0;tex[1]=1;
 322   1              Button(50,110,190,160,2,-1,0x07ff,0x00ff);
 323   1              tex[0]=2;tex[1]=1;tex[2]=3;tex[3]=4;
 324   1              Button(50,170,190,220,4,-1,0x07ff,0x00ff);
 325   1              tex[0]=2;tex[1]=1;tex[2]=12;tex[3]=13;
 326   1              Button(50,230,190,280,4,-1,0x07ff,0x00ff);
 327   1              LCD_ShowString(45,300,colors[4],colors[6],"Version:Snail 1.1.3",8);
 328   1              LCD_CS=1;
 329   1              while(1)
 330   1              {
 331   2                      LCD_CS=0;
 332   2                      buttonID=-1;
 333   2      
 334   2      /////////////////////////////////////////////////////
 335   2                      if(count_time==800)
 336   2                      {
 337   3                              GetAcc(&aa,&bb);
 338   3                              LCD_ShowNumber(10,10,colors[4],colors[6],aa,8);
 339   3                              LCD_ShowNumber(10,30,colors[4],colors[6],bb,8);
 340   3                      }
 341   2                      if(count_time==500)
 342   2                      {
 343   3                              dis=GetDis(&d0);
 344   3                              LCD_ShowNumber(10,50,colors[4],colors[6],dis,8);
 345   3                              LCD_ShowNumber(10,70,colors[4],colors[6],d0,8);
 346   3      
 347   3                      }
 348   2      /////////////////////////////////////////////////////
 349   2      
 350   2                      if(count_time==999) 
 351   2                      {
 352   3                              ShowRotSpeed();
 353   3                              if(ConstantPower==0 && ReChk_time>=Chk) 
 354   3                              {
 355   4                                      RotChk();
 356   4                                      ReChk_time=0;
 357   4                              }
 358   3                      }
 359   2                      if(IRQ==0)
 360   2                      {
 361   3                              Get_touch_coor(&corx,&cory);
 362   3                              if(50<=corx && corx<=190 && 110<= cory && cory<=160)
 363   3                              {
 364   4                                      ButtonDown(50,110,190,160,0x07ff,0x00ff);
 365   4                                      buttonID=0;
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 7   

 366   4                              }
 367   3                              else if(50<=corx && corx<=190 && 170<= cory && cory<=220)
 368   3                              {
 369   4                                      ButtonDown(50,170,190,220,0x07ff,0x00ff);
 370   4                                      buttonID=1;
 371   4                              }
 372   3                              else if(50<=corx && corx<=190 && 230<=cory && cory<=280)
 373   3                              {
 374   4                                      ButtonDown(50,230,190,280,0x07ff,0x00ff);
 375   4                                      buttonID=2;
 376   4                              }
 377   3                              else if(50<=corx && corx<=190 && 50<=cory && cory<=100)
 378   3                              {
 379   4                                      ButtonDown(50,50,190,100,0x07ff,0x00ff);
 380   4                                      buttonID=3;
 381   4                              }
 382   3                              while(IRQ==0);
 383   3                              if(buttonID==0) 
 384   3                              {
 385   4                                      FixedSpeedUI();
 386   4                                      return;
 387   4                              }
 388   3                              else if(buttonID==1)
 389   3                              {
 390   4                                      SetSpeedUI();
 391   4                                      return;
 392   4                              }
 393   3                              else if(buttonID==2)
 394   3                              {
 395   4                                      RSrecordUI();
 396   4                                      return;
 397   4                              }
 398   3                              else if(buttonID==3)
 399   3                              {
 400   4                                      SetUI();
 401   4                                      return;
 402   4                              }
 403   3                      }
 404   2              } 
 405   1      }
 406          
 407          void SelButtonUp(u8 x1,u16 y1)
 408          {
 409   1              FillRec(x1,y1,x1+29,y1+29,0xc618);
 410   1              ChineseChar(x1+3,y1+3,1,0x8410,0xc618,27);
 411   1              //FillRec(x1+8,y1+8,x1+21,y1+21,0x8410);
 412   1      }
 413          
 414          void SelButtonDown(u8 x1,u16 y1)
 415          {       
 416   1              FillRec(x1,y1,x1+29,y1+29,0xc618);
 417   1              ChineseChar(x1+3,y1+3,1,0x001f,0xc618,27);
 418   1              //FillRec(x1+8,y1+8,x1+21,y1+21,colors[5]);
 419   1      }
 420                  
 421          
 422          void SetUI()
 423          {
 424   1              Pant(0xf8,0x1f);
 425   1              LCD_CS=0;
 426   1              tex[0]=5;tex[1]=6;
 427   1              Button(10,10,70,50,2,-1,0x07ff,0x00ff);
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 8   

 428   1      
 429   1              tex[0]=11;tex[1]=17;tex[2]=18;tex[3]=19;
 430   1              LCD_ShowChinese(30,100,24,colors[4],colors[6],4);
 431   1              if(!Acc_enable) SelButtonUp(180,97);
 432   1              else SelButtonDown(180,97);
 433   1              tex[0]=20;tex[1]=21;tex[2]=22;tex[3]=23;
 434   1              LCD_ShowChinese(30,140,24,colors[4],colors[6],4);
 435   1              if(!Dis_enable) SelButtonUp(180,137);
 436   1              else SelButtonDown(180,137);
 437   1              tex[0]=24;tex[1]=5;tex[2]=25;tex[3]=26;
 438   1              LCD_ShowChinese(30,180,24,colors[4],colors[6],4);
 439   1              if(!ConstantPower) SelButtonUp(180,177);
 440   1              else SelButtonDown(180,177);
 441   1              tex[0]=1;tex[1]=5;tex[2]=3;tex[3]=2;
 442   1              LCD_ShowChinese(30,220,24,colors[4],colors[6],4);
 443   1              if(ConstantPower) SelButtonUp(180,217);
 444   1              else SelButtonDown(180,217);
 445   1       
 446   1              while(1)
 447   1              {
 448   2                      LCD_CS=0;
 449   2                  buttonID=-1;                
 450   2                      if(count_time==999)
 451   2                      {
 452   3                              ShowRotSpeed();
 453   3                              if(ConstantPower==0 && ReChk_time>=Chk) 
 454   3                              {
 455   4                                      RotChk();
 456   4                                      ReChk_time=0;
 457   4                              }
 458   3                      }
 459   2      
 460   2                      if(IRQ==0)
 461   2                      {
 462   3                              Get_touch_coor(&corx,&cory);
 463   3                              if(10<=corx && corx<=70 && 10<=cory && cory<=50)
 464   3                              {
 465   4                                      buttonID=0;
 466   4                                      ButtonDown(10,10,70,50,0x07ff,0x00ff);
 467   4                              }
 468   3                              else if(180<=corx && corx<=210 && 97<=cory && cory<=127) buttonID=1;
 469   3                              else if(180<=corx && corx<=210 && 137<=cory && cory<=167) buttonID=2;
 470   3                              else if(180<=corx && corx<=210 && 177<=cory && cory<=207) buttonID=3;
 471   3                              else if(180<=corx && corx<=210 && 217<=cory && cory<=247) buttonID=4;
 472   3      
 473   3                              while(IRQ==0);
 474   3      
 475   3                              if(buttonID==0) return;
 476   3                              if(buttonID==1)
 477   3                              {
 478   4                                      if(!Acc_enable)
 479   4                                      {
 480   5                                              Acc_enable=1;
 481   5                                              SelButtonDown(180,97);
 482   5                                      }
 483   4                                      else {
 484   5                                                      Acc_enable=0;
 485   5                                                      SelButtonUp(180,97);
 486   5                                               }
 487   4                              }
 488   3                              else if(buttonID==2)
 489   3                              {
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 9   

 490   4                                      if(!Dis_enable)
 491   4                                      {
 492   5                                              Dis_enable=1;
 493   5                                              SelButtonDown(180,137);
 494   5                                      }
 495   4                                      else {
 496   5                                                      Dis_enable=0;
 497   5                                                      SelButtonUp(180,137);
 498   5                                               }
 499   4                              }
 500   3                              else if(buttonID==3)
 501   3                              {
 502   4                                      if(!ConstantPower)
 503   4                                      {
 504   5                                              ConstantPower=1;
 505   5                                              SelButtonDown(180,177);
 506   5                                              SelButtonUp(180,217);
 507   5                                      }
 508   4                                      else {
 509   5                                                      ConstantPower=0;
 510   5                                                      SelButtonUp(180,177);
 511   5                                                      SelButtonDown(180,217);
 512   5                                               }
 513   4                              }
 514   3                              else if(buttonID==4)
 515   3                              {
 516   4                                      if(ConstantPower)
 517   4                                      {
 518   5                                              ConstantPower=0;
 519   5                                              SelButtonDown(180,217);
 520   5                                              SelButtonUp(180,177);
 521   5                                      }
 522   4                                      else {
 523   5                                                      ConstantPower=1;
 524   5                                                      SelButtonUp(180,217);
 525   5                                                      SelButtonDown(180,177);
 526   5                                               }
 527   4                              }                               
 528   3                      }
 529   2              }
 530   1      }
 531          
 532          void FixedSpeedUI()
 533          {
 534   1              Pant(0xf8,0x1f);
 535   1              LCD_CS=0;
 536   1              tex[0]=5;tex[1]=6;
 537   1              Button(10,10,70,50,2,-1,0x07ff,0x00ff);
 538   1              tex[0]=7;tex[1]=1;
 539   1              Button(30,160,100,280,2,-1,0x07ff,0x00ff);
 540   1              tex[0]=8;tex[1]=1;
 541   1              Button(140,160,210,280,2,-1,0x07ff,0x00ff);
 542   1              FillRec(110,126,195,128,0xffe0);
 543   1              
 544   1              if(ConstantPower)
 545   1              {
 546   2              LCD_ShowString(200,100,colors[4],colors[6],"%",16);
 547   2                      LCD_ShowString(40,100,colors[4],colors[6],"PWM:",16);
 548   2                      LCD_ShowNumber(110,100,colors[4],colors[6],W,16);
 549   2              }
 550   1              else
 551   1              {
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 10  

 552   2                      ChineseChar(40,100,1,colors[4],colors[6],3);
 553   2                      ChineseChar(65,100,1,colors[4],colors[6],2);
 554   2                      LCD_ShowChar(91,100,colors[4],colors[6],':',16);
 555   2                      LCD_ShowString(200,100,colors[4],colors[6],"/s",16);
 556   2                      LCD_ShowNumber(110,100,colors[4],colors[6],rotset,16);
 557   2              }
 558   1      
 559   1              while(1)
 560   1              {
 561   2                      LCD_CS=0;
 562   2                  buttonID=-1;
 563   2                      
 564   2                      if(count_time==999) 
 565   2                      {
 566   3                              ShowRotSpeed();
 567   3                              if(ConstantPower==0 && ReChk_time>=Chk) 
 568   3                              {
 569   4                                      RotChk();
 570   4                                      ReChk_time=0;
 571   4                              }
 572   3                      }
 573   2                      if(IRQ==0)
 574   2                      {
 575   3                              Get_touch_coor(&corx,&cory);
 576   3                              if(10<=corx && corx<=70 && 10<=cory && cory<=50)
 577   3                              {
 578   4                                      buttonID=0;
 579   4                                      ButtonDown(10,10,70,50,0x07ff,0x00ff);
 580   4                              }
 581   3                              else if(30<=corx && corx<=100 && 160<=cory && cory<=280)
 582   3                              {
 583   4                                      buttonID=1;
 584   4                                      ButtonDown(30,160,100,280,0x07ff,0x00ff);
 585   4                              }
 586   3                              else if(140<=corx && corx<=210 && 160<=cory && cory<=280)
 587   3                              {
 588   4                                      buttonID=2;
 589   4                                      ButtonDown(140,160,210,280,0x07ff,0x00ff);
 590   4                              }
 591   3      
 592   3                              while(IRQ==0)
 593   3                              {
 594   4                                      if(buttonID==1)
 595   4                                      {
 596   5                                              //电机加速代码
 597   5                                              if(!ConstantPower)
 598   5                                              {
 599   6                                                              if(rotset==1000)
 600   6                                                              {
 601   7                                                                      rotset=1000;
 602   7                                                              }
 603   6                                                              else
 604   6                                                              {
 605   7                                                                      rotset+=1;
 606   7                                                              }
 607   6                                                              LCD_ShowNumber(110,100,colors[4],colors[6],rotset,16);
 608   6                                                              Left=0;Right=101;Chk=2;rottmp=rotset;resetrot=1;
 609   6                                              }
 610   5                                              else 
 611   5                                              {
 612   6                                                              if(W==100)
 613   6                                                              {
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 11  

 614   7                                                                      W=1000;
 615   7                                                              }
 616   6                                                              else
 617   6                                                              {
 618   7                                                                      W+=1;
 619   7                                                              }
 620   6                                                              LCD_ShowNumber(110,100,colors[4],colors[6],W,16);       
 621   6                                              }
 622   5                                      }
 623   4                                      else if(buttonID==2)
 624   4                                      {
 625   5                                              //电机减速代码
 626   5                                              if(!ConstantPower)
 627   5                                              {
 628   6                                                              if(rotset==0)
 629   6                                                              {
 630   7                                                                      rotset=0;
 631   7                                                              }
 632   6                                                              else
 633   6                                                              {
 634   7                                                                      rotset-=1;
 635   7                                                              }
 636   6                                                              LCD_ShowNumber(110,100,colors[4],colors[6],rotset,16);
 637   6                                                              Left=0;Right=101;Chk=2;rottmp=rotset;resetrot=1;
 638   6                                              }
 639   5                                              else
 640   5                                              {
 641   6                                                              if(W==0)
 642   6                                                              {
 643   7                                                                      W=0;
 644   7                                                              }
 645   6                                                              else
 646   6                                                              {
 647   7                                                                      W-=1;
 648   7                                                              }
 649   6                                                              LCD_ShowNumber(110,100,colors[4],colors[6],W,16);
 650   6                                              }
 651   5                                      }
 652   4                                      while(IRQ==0)
 653   4                                      {
 654   5                                              if(TT==400) break;
 655   5                                              if(count_time==999) ShowRotSpeed();
 656   5                                      }
 657   4                              }
 658   3      
 659   3      //                      while(IRQ==0);
 660   3                              if(buttonID==0) return;
 661   3                              else if(buttonID==1)
 662   3                              {
 663   4                                      ButtonUp(30,160,100,280,0x07ff,0x00ff);
 664   4                              }
 665   3                              else if(buttonID==2)
 666   3                              {                                               
 667   4                                      ButtonUp(140,160,210,280,0x07ff,0x00ff);
 668   4                              }
 669   3                      }
 670   2              }               
 671   1      } 
 672          
 673          void SetSpeedUI()
 674          {
 675   1              idata unsigned int tmp=0;       
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 12  

 676   1      
 677   1              Pant(0xf8,0x1f);
 678   1              LCD_CS=0;
 679   1              tex[0]=5;tex[1]=6;
 680   1              Button(10,10,70,50,2,-1,0x07ff,0x001f);
 681   1      
 682   1          Button(15,130,84,169,0,7,0xffe0,0xfca0);
 683   1              Button(85,130,154,169,0,8,0xffe0,0xfca0);
 684   1              Button(155,130,225,169,0,9,0xffe0,0xfca0);
 685   1              Button(15,170,84,209,0,4,0xffe0,0xfca0);
 686   1              Button(85,170,154,209,0,5,0xffe0,0xfca0);
 687   1              Button(155,170,225,209,0,6,0xffe0,0xfca0);
 688   1              Button(15,210,84,249,0,1,0xffe0,0xfca0);
 689   1              Button(85,210,154,249,0,2,0xffe0,0xfca0);
 690   1              Button(155,210,225,249,0,3,0xffe0,0xfca0);
 691   1              Button(15,250,84,290,0,0,0xffe0,0xfca0);
 692   1          tex[0]=9;tex[1]=4;
 693   1              Button(85,250,154,290,2,-1,0xffe0,0xfca0);
 694   1              tex[0]=10;tex[1]=11;
 695   1              Button(155,250,225,290,2,-1,0xffe0,0xfca0);             
 696   1      
 697   1      //  LCD_ShowString(190,24,colors[4],colors[6],"/min",8);
 698   1      //      LCD_ShowString(170,80,colors[4],colors[6],"/min",16);
 699   1      //      FillRec(30,110,165,112,0x07e0);
 700   1              
 701   1      //      rotset=0;
 702   1              if(ConstantPower)
 703   1              {
 704   2              LCD_ShowNumber(110,80,colors[4],colors[6],W,16);
 705   2                  LCD_ShowString(40,80,colors[4],colors[6],"PWM:",16);
 706   2              LCD_ShowString(200,80,colors[4],colors[6],"%",16);
 707   2              }
 708   1              else 
 709   1              {
 710   2                      ChineseChar(40,80,1,colors[4],colors[6],3);
 711   2                      ChineseChar(65,80,1,colors[4],colors[6],2);
 712   2                      LCD_ShowChar(91,80,colors[4],colors[6],':',16);
 713   2                      LCD_ShowString(200,80,colors[4],colors[6],"/s",16);     
 714   2                      LCD_ShowNumber(110,80,colors[4],colors[6],rotset,16);
 715   2              }
 716   1      
 717   1              FillRec(110,106,195,108,0xffe0);                
 718   1          while(1)
 719   1              {
 720   2                      LCD_CS=0;
 721   2                      buttonID=-1;
 722   2                      if(count_time==999)
 723   2                      {
 724   3                              ShowRotSpeed();
 725   3                              if(ConstantPower==0 && ReChk_time>=Chk) 
 726   3                              {
 727   4                                      RotChk();
 728   4                                      ReChk_time=0;
 729   4                              }
 730   3                      }
 731   2                      if(IRQ==0)
 732   2                      {
 733   3                              Get_touch_coor(&corx,&cory);
 734   3                              if(10<=corx && corx<=70 && 10<=cory && cory<=50) 
 735   3                              {
 736   4                                      buttonID=10;
 737   4                                      ButtonDown(10,10,70,50,0x07ff,0x00ff);
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 13  

 738   4                              }
 739   3                              else if(15<=corx && corx<=84 && 130<=cory && cory<=169)
 740   3                              {
 741   4                                      buttonID=7;
 742   4                                      ButtonDown(15,130,84,169,0xffe0,0xfca0);
 743   4                              }
 744   3                              else if(85<=corx && corx<=154 && 130<=cory && cory<=169)
 745   3                              {
 746   4                                      buttonID=8;
 747   4                                      ButtonDown(85,130,154,169,0xffe0,0xfca0);
 748   4                              }
 749   3                              else if(155<=corx && corx<=225 && 130<=cory && cory<=169)
 750   3                              {
 751   4                                      buttonID=9;
 752   4                                      ButtonDown(155,130,225,169,0xffe0,0xfca0);
 753   4                              }
 754   3                              else if(15<=corx && corx<=84 && 170<=cory && cory<=209)
 755   3                              {
 756   4                                      buttonID=4;
 757   4                                      ButtonDown(15,170,84,209,0xffe0,0xfca0);
 758   4                              }
 759   3                              else if(85<=corx && corx<=154 && 170<=cory && cory<=209)
 760   3                              {
 761   4                                      buttonID=5;
 762   4                                      ButtonDown(85,170,154,209,0xffe0,0xfca0);
 763   4                              }
 764   3                              else if(155<=corx && corx<=225 && 170<=cory && cory<=209)
 765   3                              {
 766   4                                      buttonID=6;
 767   4                                      ButtonDown(155,170,225,209,0xffe0,0xfca0);
 768   4                              }
 769   3                              else if(15<=corx && corx<=84 && 210<=cory && cory<=249)
 770   3                              {
 771   4                                      buttonID=1;
 772   4                                      ButtonDown(15,210,84,249,0xffe0,0xfca0);
 773   4                              }
 774   3                              else if(85<=corx && corx<=154 && 210<=cory && cory<=249)
 775   3                              {
 776   4                                      buttonID=2;
 777   4                                      ButtonDown(85,210,154,249,0xffe0,0xfca0);
 778   4                              }
 779   3                              else if(155<=corx && corx<=225 && 210<=cory && cory<=249)
 780   3                              {
 781   4                                      buttonID=3;
 782   4                                      ButtonDown(155,210,225,249,0xffe0,0xfca0);
 783   4                              }
 784   3                              else if(15<=corx && corx<=84 && 250<=cory && cory<=290)
 785   3                              {
 786   4                                      buttonID=0;
 787   4                                      ButtonDown(15,250,84,290,0xffe0,0xfca0);
 788   4                              }
 789   3                              else if(85<=corx && corx<=154 && 250<=cory && cory<=290)
 790   3                              {
 791   4                                      buttonID=11;
 792   4                                      ButtonDown(85,250,154,290,0xffe0,0xfca0);
 793   4                              }
 794   3                              else if(155<=corx && corx<=225 && 250<=cory && cory<=290)
 795   3                              {
 796   4                                      buttonID=12;
 797   4                                      ButtonDown(155,250,225,290,0xffe0,0xfca0);      
 798   4                              }
 799   3      
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 14  

 800   3                              while(IRQ==0);
 801   3                              if(buttonID==10) return;
 802   3      
 803   3                              if(0<=buttonID && buttonID<=9)
 804   3                              {
 805   4                                      if(ConstantPower==0)
 806   4                                      {
 807   5                                              if(tmp*10+buttonID<=1000)
 808   5                                                      tmp=tmp*10+buttonID;
 809   5                                              else tmp=1000;
 810   5      //              LCD_ShowNumber(70,80,colors[4],colors[6],rotset,16);
 811   5                                              LCD_ShowNumber(110,80,colors[4],colors[6],tmp,16);      
 812   5                                      }
 813   4                                      else 
 814   4                                      {
 815   5                                              if(tmp*10+buttonID<=100)
 816   5                                                      tmp=tmp*10+buttonID;
 817   5                                              else tmp=100;
 818   5                                              LCD_ShowNumber(110,80,colors[4],colors[6],tmp,16);
 819   5                                      }
 820   4                              }
 821   3                              else if(buttonID==11)
 822   3                              {
 823   4                                      //调控电机转速的代码
 824   4                                      if(ConstantPower==0)
 825   4                                      {
 826   5                                              rotset=tmp;
 827   5                                              Left=0;Right=101;Chk=2;rottmp=rotset;resetrot=1;
 828   5                                      }
 829   4                                      else W=tmp;
 830   4      //                              LCD_ShowNumber(70,80,colors[0],colors[6],W,16);
 831   4                                      LCD_ShowNumber(110,80,0x001f,colors[6],tmp,16);
 832   4                                      tmp=0;
 833   4                              }
 834   3                              else if(buttonID==12)
 835   3                              {
 836   4                                      tmp=0;
 837   4      //                              LCD_ShowNumber(70,80,colors[4],colors[6],rotset,16);
 838   4                                      LCD_ShowNumber(110,80,colors[4],colors[6],tmp,16);              
 839   4                              }
 840   3      
 841   3                              if(buttonID==7) ButtonUp(15,130,84,169,0xffe0,0xfca0);
 842   3                              else if(buttonID==8) ButtonUp(85,130,154,169,0xffe0,0xfca0);
 843   3                              else if(buttonID==9) ButtonUp(155,130,225,169,0xffe0,0xfca0);
 844   3                              else if(buttonID==4) ButtonUp(15,170,84,209,0xffe0,0xfca0);
 845   3                              else if(buttonID==5) ButtonUp(85,170,154,209,0xffe0,0xfca0);
 846   3                              else if(buttonID==6) ButtonUp(155,170,225,209,0xffe0,0xfca0);
 847   3                              else if(buttonID==1) ButtonUp(15,210,84,249,0xffe0,0xfca0);
 848   3                              else if(buttonID==2) ButtonUp(85,210,154,249,0xffe0,0xfca0);
 849   3                              else if(buttonID==3) ButtonUp(155,210,225,249,0xffe0,0xfca0);
 850   3                              else if(buttonID==0) ButtonUp(15,250,84,290,0xffe0,0xfca0);
 851   3                              else if(buttonID==11) ButtonUp(85,250,154,290,0xffe0,0xfca0);
 852   3                              else if(buttonID==12) ButtonUp(155,250,225,290,0xffe0,0xfca0);
 853   3                      } 
 854   2              }                       
 855   1      }
 856          
 857          void ShowChart()
 858          {
 859   1      //      FillRec(44,70,240,280,0xf81f);
 860   1              FillRec(40,70,44,234,0x001f);
 861   1              FillRec(40,230,240,234,0x001f);
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 15  

 862   1      
 863   1              FillRec(44,80,240,80,0x07e0);
 864   1              FillRec(44,130,240,130,0x07e0);
 865   1              FillRec(44,180,240,180,0x07e0);
 866   1      //      FillRec(44,230,240,230,0x07e0);
 867   1              FillRec(80,70,80,230,0x07e0);
 868   1              FillRec(120,70,120,230,0x07e0);
 869   1              FillRec(160,70,160,230,0x07e0);
 870   1              FillRec(200,70,200,230,0x07e0);
 871   1      }
 872          
 873          void CopyToTemp()
 874          {
 875   1              u8 i,j;
 876   1              if(erec==0) 
 877   1              for(i=0;i<=srec;i++) 
 878   1              {
 879   2                      temp[i]=record_data[i];
 880   2                      temp_w[i]=record_w[i];
 881   2              }
 882   1              else
 883   1              {
 884   2                      j=0;
 885   2                      for(i=srec+1;i<=49;i++)
 886   2                      {
 887   3                              temp[j]=record_data[i];
 888   3                              temp_w[j]=record_w[i];
 889   3                              j++;
 890   3                      }
 891   2                      for(i=0;i<=srec;i++)
 892   2                      {
 893   3                              temp[j]=record_data[i];
 894   3                              temp_w[j]=record_w[i];
 895   3                              j++;
 896   3                      }
 897   2              }
 898   1      }
 899                  
 900          void RSrecordUI()
 901          {
 902   1              idata u8 i,j;
 903   1              int dis,d0,d1,d2,d3;
 904   1      
 905   1              Pant(0xf8,0x1f);
 906   1              LCD_CS=0;
 907   1              tex[0]=5;tex[1]=6;
 908   1              Button(10,10,70,50,2,-1,0x07ff,0x00ff);
 909   1              tex[0]=14;tex[1]=15;
 910   1              Button(90,10,150,50,2,-1,0xffe0,0xfca0);
 911   1              ShowRotSpeed();
 912   1              FillRec(234,11,240,17,0xffe0);
 913   1              FillRec(234,29,240,35,0xf800);
 914   1              ShowChart();
 915   1              Acc_data[0]=0;
 916   1      //      LCD_ShowNumber(0,274,colors[4],colors[6],0,8);
 917   1              LCD_ShowNumber(0,224,colors[4],colors[6],0,8);
 918   1              LCD_ShowNumber(0,174,colors[4],colors[6],50,8);
 919   1              LCD_ShowNumber(0,124,colors[4],colors[6],100,8);
 920   1              LCD_ShowNumber(0,74,colors[4],colors[6],150,8);
 921   1      
 922   1              tex[0]=28;tex[1]=29;
 923   1              LCD_ShowChinese(5,260,24,colors[4],colors[6],2);
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 16  

 924   1              LCD_ShowChar(55,260,colors[4],colors[6],':',16);
 925   1              tex[0]=33;tex[1]=34;tex[2]=35;tex[3]=22;
 926   1              LCD_ShowChinese(5,290,24,colors[4],colors[6],4);
 927   1              LCD_ShowChar(103,290,colors[4],colors[6],':',16);
 928   1      
 929   1              if(!Acc_enable)
 930   1              {
 931   2                      tex[0]=30;tex[1]=32;tex[2]=43;
 932   2                      LCD_ShowChinese(75,260,24,colors[4],colors[6],3);
 933   2              }
 934   1              if(!Dis_enable)
 935   1              {
 936   2                      tex[0]=30;tex[1]=32;tex[2]=43;
 937   2                      LCD_ShowChinese(123,290,24,colors[4],colors[6],3);
 938   2              }
 939   1              else LCD_ShowString(170,290,colors[4],colors[6],"cm",16);
 940   1      
 941   1              CopyToTemp();
 942   1              if(erec==0)
 943   1                      for(i=1;i<=srec;i++)
 944   1                      {
 945   2                              LineF(40+i*4,230-temp_w[i-1],44+i*4,230-temp_w[i],0xffe0);
 946   2                              LineF(40+i*4,230-temp[i-1],44+i*4,230-temp[i],0xf800);
 947   2                      }
 948   1              else for(i=1;i<=49;i++)
 949   1                      {
 950   2                              LineF(40+i*4,230-temp_w[i-1],44+i*4,230-temp_w[i],0xffe0);
 951   2                              LineF(40+i*4,230-temp[i-1],44+i*4,230-temp[i],0xf800);
 952   2                      }
 953   1      
 954   1              while(1)
 955   1              {
 956   2      /*
 957   2                      if(count_time==500)
 958   2                      {
 959   2                              dis=GetDisAll(&d0,&d1,&d2,&d3);
 960   2                              LCD_ShowNumber(10,50,colors[4],colors[6],dis,8);
 961   2                              LCD_ShowNumber(10,70,colors[4],colors[6],d0,8);
 962   2                              LCD_ShowNumber(10,90,colors[4],colors[6],d1,8);
 963   2                              LCD_ShowNumber(10,110,colors[4],colors[6],d2,8);
 964   2                              LCD_ShowNumber(10,130,colors[4],colors[6],d3,8);
 965   2                      }       
 966   2      */
 967   2                      LCD_CS=0;
 968   2                      buttonID=-1;
 969   2                      if(count_time==999) 
 970   2                      {
 971   3                              chart_time++;
 972   3                              ShowRotSpeed();
 973   3                              if(ConstantPower==0 && ReChk_time>=Chk) 
 974   3                              {
 975   4                                      RotChk();
 976   4                                      ReChk_time=0;
 977   4                              }
 978   3                              if(erec==0 && srec>=1)
 979   3                              {
 980   4                                      LineF(40+srec*4,230-record_w[srec-1],44+srec*4,230-record_w[srec],0xffe0);
 981   4                                      LineF(40+srec*4,230-record_data[srec-1],44+srec*4,230-record_data[srec],0xf800);
 982   4                                      if(srec==49) chart_time=0;
 983   4                              }
 984   3                      }
 985   2      
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 17  

 986   2                      if(erec==1 && chart_time>=5)
 987   2                      {
 988   3                              chart_time=0;
 989   3                              for(i=1;i<=49;i++)
 990   3                              {
 991   4                                      LineF(40+i*4,230-temp_w[i-1],44+i*4,230-temp_w[i],0xf81f);
 992   4                                      LineF(40+i*4,230-temp[i-1],44+i*4,230-temp[i],0xf81f);
 993   4                              }
 994   3                              ShowChart();
 995   3                              CopyToTemp();
 996   3                              for(i=1;i<=49;i++)
 997   3                              {
 998   4                                      LineF(40+i*4,230-temp_w[i-1],44+i*4,230-temp_w[i],0xffe0);
 999   4                                      LineF(40+i*4,230-temp[i-1],44+i*4,230-temp[i],0xf800);
1000   4                              }
1001   3                      }
1002   2      
1003   2                      if(Acc_enable && (count_time==200 || count_time==700))
1004   2                      {
1005   3                              Acc_data[0]++;
1006   3                              GetAcc(&dis,&d0);
1007   3                              Acc_data[Acc_data[0]]=d0;
1008   3                              if(Acc_data[0]==8)
1009   3                              {
1010   4                                      Acc_data[0]=0;
1011   4                                      for(i=1;i<8;i++)
1012   4                                              for(j=i+1;j<=8;j++)
1013   4                                                      if(Acc_data[i]>Acc_data[j])
1014   4                                                      {
1015   5                                                              dis=Acc_data[i];
1016   5                                                              Acc_data[i]=Acc_data[j];
1017   5                                                              Acc_data[j]=dis;
1018   5                                                      }
1019   4                                      d0=0;d1=0;d3=0;
1020   4                                      for(i=1;i<=8;i++)
1021   4                                              if(Acc_data[i]>=250) d0++;
1022   4                                              else if(Acc_data[i]<=245) d1++;
1023   4                                      if(d0>=2 && d1>=2) d3=1;
1024   4                                      else
1025   4                                      {
1026   5                                              d2=0;
1027   5                                              for(i=2;i<=7;i++)
1028   5                                                      d2+=Acc_data[i];
1029   5                                              d2=d2/6;
1030   5                                              if(d2<245) d3=2;
1031   5                                              else if(d2>250) d3=3;
1032   5                                      }
1033   4      
1034   4                                      switch(d3)
1035   4                                      {
1036   5                                              case 0:
1037   5                                                      tex[0]=36;tex[1]=37;
1038   5                                                      break;
1039   5                                              case 1:
1040   5                                                      tex[0]=38;tex[1]=39;
1041   5                                                      break;
1042   5                                              case 2:
1043   5                                                      tex[0]=40;tex[1]=41;
1044   5                                                      break;
1045   5                                              case 3:
1046   5                                                      tex[0]=40;tex[1]=42;
1047   5                                                      break;
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 18  

1048   5                                      }
1049   4                                      LCD_ShowChinese(75,260,24,colors[4],colors[6],2);
1050   4      
1051   4                                      if(d3==1) rotset=rotset*3/5;
1052   4                                      else rotset=rottmp;
1053   4      
1054   4                              }
1055   3                      }
1056   2      
1057   2                      if(Dis_enable && (count_time==100 || count_time==600))
1058   2                      {
1059   3                              dis=GetDisAll(&d0,&d1,&d2,&d3);
1060   3                              LCD_ShowNumber3(123,290,colors[4],colors[6],dis,16);
1061   3                              
1062   3                              if(dis>20)
1063   3                              {
1064   4                                      if(dis<=30)     rotset=rottmp*0.1;
1065   4                                      else if(dis<=40) rotset=rottmp*0.2;
1066   4                                      else if(dis<=50) rotset=rottmp*0.3;
1067   4                                      else if(dis<=60) rotset=rottmp*0.4;
1068   4                                      else if(dis<=70) rotset=rottmp*0.5;
1069   4                                      else if(dis<=80) rotset=rottmp*0.6;
1070   4                                      else if(dis<=90) rotset=rottmp*0.7;
1071   4                                      else if(dis<=100) rotset=rottmp*0.8;
1072   4                                      else rotset=rottmp;
1073   4                              }
1074   3      //                      dis=GetDis(&d0);
1075   3      //                      LCD_ShowNumber(10,150,colors[4],colors[6],dis,8);                       
1076   3                      }
1077   2      
1078   2                      if(IRQ==0)
1079   2                      {
1080   3                              Get_touch_coor(&corx,&cory);
1081   3                              if(10<=corx && corx<=70 && 10<=cory && cory<=50)
1082   3                              {
1083   4                                      buttonID=0;
1084   4                                      ButtonDown(10,10,70,50,0x07ff,0x00ff);
1085   4                              }
1086   3                              else if(90<=corx && corx<=150 && 10<=cory && cory<=50)
1087   3                              {
1088   4                                      buttonID=1;
1089   4                                      ButtonDown(90,10,150,50,0xffe0,0xfca0);
1090   4                              }
1091   3                              while(IRQ==0);
1092   3                              if(buttonID==0) return;
1093   3                              else if(buttonID==1)
1094   3                              {
1095   4                                      ButtonUp(90,10,150,50,0xffe0,0xfca0);
1096   4                                      erec=0;
1097   4                                      srec=-1;
1098   4                                      FillRec(44,70,240,230,0xf81f);
1099   4                                      ShowChart();
1100   4                              }
1101   3                      }
1102   2              }
1103   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =  10354    ----
   CONSTANT SIZE    =     43    ----
   XDATA SIZE       =    109      99
C51 COMPILER V7.06   SECTION                                                               03/22/2013 05:09:42 PAGE 19  

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =    146      24
   BIT SIZE         =      5    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
